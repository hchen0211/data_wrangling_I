---
title: "data_manipulation"
output: github_document
---

```{r}
library(tidyverse)
library(dplyr)
```

lET'S Import datasets

```{r}

litters_df <- 
  read_csv("data/FAS_litters.csv", na = c("NA", ".", " "))

litters_df <- 
    janitor::clean_names(litter_df)

pups_df <- 
  read_csv("data/FAS_pups.csv" , skip = 3 , na = c("NA", ".", " "))

pups_df <- 
      janitor::clean_names(pups_df)

```


#select 

```{r}
select(litters_df, group, litter_number, gd0_weight)
```
```{r}
select(litters_df, group:gd_of_birth)
select(litters_df, -group)
```
select by prefix
```{r}
select(litters_df, group, starts_with("gd"))
```

rerrange by selecting

```{r}
select(litters_df, starts_with("gd"), group)
select(litters_df, litter_number, everything())
```

reaname by selecting

```{r}
select(litters_df, 团队 = group, everything())
rename(litters_df, fuck = group)

```

What if i only select one variable ?

```{r}
select(litters_df, group)
```

assessment
```{r}
select(pups_df, litter_number, sex, pd_ears)
```

#Filter

use 'filter()' to filter out name

```{r}
filter(litters_df, gd_of_birth == 20 , pups_born_alive == 6)

```

Look for more than two pups alive
```{r}
filter(litters_df, pups_born_alive >= 10)
```

look for non-matches
```{r}
filter(litters_df, pups_born_alive != 6 , pups_born_alive != 8)
```

match to a set
```{r}
filter(litters_df, group %in%  c('Con7','Con8'))
```

filter out missing nows with 'drop_na()'
```{r}
drop_na(litters_df)
drop_na(litters_df, gd0_weight)
```

Assessment:
```{r}
filter(pups_df, sex == 1)
filter(pups_df, sex == 2 , pd_walk < 11 )
```

#Mutate

use 'mutate()' to create or modify varialbes

```{r}
mutate(litters_df,
       wt_gain = gd18_weight - gd0_weight,
       group = str_to_lower(group)
    )

```

# Arrange

'arrange()' arranges things

```{r}
arrange(litters_df, pups_born_alive)
arrange(litters_df, desc(pups_born_alive))
arrange(litters_df, group, pups_born_alive)
```

#PIPES

Let's see a bad way to do things

```{r echo = FALSE}
litter_df <- 
  read_csv("data/FAS_litters.csv", na = c("NA", ".", " "))

litters_df <- 
    janitor::clean_names(litter_df)


```
Using pips to avoid all this

```{r}
litters_df <- 
  read_csv("data/FAS_litters.csv", na = c("NA", ".", " ")) |> 
  janitor:: clean_names() |> 
  select(group, litter_number, starts_with("gd")) |> 
  drop_na() |> 
  mutate(
    wt_gain = gd18_weight - gd0_weight
  ) |> 
  arrange(wt_gain) |> 
  filter(wt_gain > 15)
             
```

Assessment
```{r}
pups_df <- 
  read_csv("data/FAS_pups.csv" , skip = 3 , na = c("NA", ".", " ")) |> 
  janitor::clean_names() |> 
  filter(sex == 1) |> 
  select(-pd_ears) |> 
  mutate( pd7more = pd_pivot >= 7)

```













